<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    {{ partial "header.html" . }}

    {{ if not .IsHome }}
    <h1>{{ .Title | markdownify }}</h1>
    {{ end }}

    {{ .Content }}

    <ul id="pages-list">
      {{ $pages := .Pages }}
      {{ if .IsHome }}{{ $pages = .Site.RegularPages }}{{ end }}
      {{ range (where $pages "Section" "!=" "") }}
      <li>
        <span class="date"></span>
        <a href="{{ .RelPermalink }}">{{ .Title | markdownify }}</a>
      </li>
      {{ end }}
    </ul>

    {{ partial "footer.html" . }}
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var pagesList = document.querySelectorAll('#pages-list li');
        pagesList.forEach(function(page) {
          var today = new Date();
          var twoMonthsAgo = new Date();
          twoMonthsAgo.setMonth(today.getMonth() - 5);

          function generateRandomDate(start, end) {
            return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));
          }

          var randomDate = generateRandomDate(twoMonthsAgo, today);
          var formattedDate = randomDate.getFullYear() + '/' + 
                              (randomDate.getMonth() + 1).toString().padStart(2, '0') + '/' + 
                              randomDate.getDate().toString().padStart(2, '0');

          page.querySelector('.date').textContent = formattedDate;
        });
      });
    </script>
</body>
</html>
